<?php include("../../resource/hpe/init_ps.php");$header_title="Teachers";$header_desc="View uploaded files";if(!isset($_SESSION['user_perm'])||!in_array($_SESSION['user_perm'],[50]))header("location: /reg/teacher/?status=1");include("../../resource/appwork/db_connect.php");$cnfdata=$db->query("SELECT stdcode,cfm,cgroup FROM chdata ORDER BY time");$stddata=$db->query("SELECT * FROM stddata");$db->close(); ?><!doctypehtml><html xmlns="http://www.w3.org/1999/xhtml"><head><?php include("../../resource/hpe/heading.php");include("../../resource/hpe/init_ss.php"); ?><style type="text/css">html body main div.container{width:calc(100% - 50px)}html body main div.container:nth-child(1){padding:25px 25px 12.5px;height:40px}html body main div.container:nth-child(2){padding:12.5px 25px 25px;height:calc(100% - 40px - 75px)}html body main div.container:nth-child(1) div{width:100%;height:100%;border-radius:20px;box-shadow:0 2.5px 2.5px 2.5px rgb(0,0,0,.25);overflow:hidden}html body main div.container:nth-child(1) div :not(i){font-size:15px;line-height:20px;font-family:THKodchasal,serif}html body main div.container:nth-child(1) div input{padding:10px 15px;width:calc(100% - 30px);height:calc(100% - 20px)}html body main div.container:nth-child(1) div i{position:absolute;top:25px;right:30px;width:40px;height:40px;font-size:36px;line-height:40px;color:var(--clr-gg-grey-500);text-align:center;pointer-events:none}html body main div.container:nth-child(1) div select{margin:10px 10px 10px 5px;padding:0 2.5px;width:125px}html body main div.container:nth-child(2) div.wrapper{position:relative;float:left;height:100%}html body main div.container:nth-child(2) div.wrapper:nth-child(1){width:420px}html body main div.container:nth-child(2) div.wrapper:nth-child(2){width:calc(100% - 420px)}html body main div.container:nth-child(2) div.wrapper span{position:relative;top:50%;left:50%;transform:translate(-50%,-50%);width:97.5%;height:97.5%;border:.25px solid #777;border-radius:5px;box-shadow:0 4px 15px 2px rgb(0 0 0 / 35%);display:block;overflow:hidden}html body main div.container:nth-child(2) div.wrapper:nth-child(1) span{overflow:auto}html body main div.container:nth-child(2) div.wrapper:nth-child(1) span table.record{min-width:100%;font-size:15px;font-family:Sarabun,sans-serif;box-shadow:none;border-spacing:0}table.record tbody:nth-child(1) tr{background-color:rgba(0,0,0,.25)!important}table.record tbody:nth-child(1) tr th:not(:nth-child(6)):hover{background-image:linear-gradient(to bottom,rgba(0 0 0 / .3125),rgba(0 0 0 / .0625))}table.record tbody:nth-child(1) tr th:not(:nth-child(6)):active{background-image:linear-gradient(to top,rgba(0 0 0 / .3125),rgba(0 0 0 / .0625))}table.record tbody:nth-child(2n+2) tr{background-color:rgba(0,0,0,.1875)}table.record tbody:nth-child(2n+2) tr th{border-top:.5px solid #999}table.record tbody:not(:nth-child(2n+2)) tr:nth-child(2n+2){background-color:rgba(0,0,0,.09375)}table.record tbody:not(:nth-child(2n+2)) tr:nth-child(2n+1){background-color:rgba(0,0,0,.0234375)}table.record tbody:not(:nth-child(2n+2)) tr:hover{background-color:rgba(104,126,231,.25)}table.record tbody:nth-child(2n+1) tr>:not(:first-child){border-left:1px dotted #999}table.record tbody:last-child tr:last-child td{border-bottom:.5px solid #999}table.record tbody tr>*{padding:5px 10px;white-space:nowrap}table.record tbody tr th{position:sticky}table.record tbody tr th i{font-size:12px}table.record tbody:not(:nth-child(1)) tr th i{cursor:pointer}table.record tbody tr th:nth-child(1),table.record tbody tr th:nth-child(2){text-align:left}table.record tbody tr td:nth-child(3),table.record tbody tr td:nth-child(4){text-align:center}table.record tbody tr td:nth-child(6){text-align:right}table.record tbody tr td:nth-child(5) a:visited,table.record tbody tr td:nth-child(6) a:link{text-decoration:none;color:var(--clr-bd-light-blue)}table.record tbody tr td:nth-child(6) a:hover{text-decoration:underline}table.record tbody tr td:nth-child(6) a:active{color:var(--clr-bd-low-light-blue)}html body main div.container:nth-child(2) div.wrapper:nth-child(2) span iframe{position:relative;top:0;width:100%;height:100%;border:none}@media only screen and (max-width:768px){html body main div.container:nth-child(2) div.wrapper{width:100%!important}html body main div.container:nth-child(2) div.wrapper:nth-child(1){height:250px}html body main div.container:nth-child(2) div.wrapper:nth-child(2){margin-top:12.5px;height:calc(100% - 250px - 12.5px)}}</style><script type="text/javascript">$(document).ready(function(){});function sttl(t){let i=$("html body main div.container:nth-child(2) div.wrapper:nth-child(1) span");i.animate({scrollTop:i.children().first().height()-i.height()+10},t)}function ro(t){w3.sortHTML("table.record tbody:nth-child(3)","tr","td:nth-child("+t.toString()+")"),w3.sortHTML("table.record tbody:nth-child(5)","tr","td:nth-child("+t.toString()+")")}function fd(){var t=$("html body main div.container:nth-child(1) div input").val();w3.filterHTML("table.record tbody:nth-child(3)","tr",t),w3.filterHTML("table.record tbody:nth-child(5)","tr",t)}function tv(t){var i=$("table.record tbody:nth-child("+t.toString()+") tr th i"),t=$("table.record tbody:nth-child("+(t+1).toString()+")");"hidden"==t.attr("hidden")?i.text("visibility"):i.text("visibility_off"),"hidden"==t.attr("hidden")?t.removeAttr("hidden"):t.attr("hidden","hidden")}function ve(t,i){i=$("table.record tbody:nth-child("+t.toString()+") tr:nth-child("+i.toString()+") td:nth-child(1)");document.querySelector("html body main div.container:nth-child(2) div.wrapper:nth-child(2) iframe").src="/reg/teacher/admission-upload/file.php?of="+i.text()}</script><script type="text/javascript"src="/reg/resource/js/lib/w3.min.js"></script></head><body><?php include("../../resource/hpe/header.php"); ?><main shrink="<?php echo($_COOKIE['sui_open-nt'])??"false"; ?>"><div class="container"><div><input onchange="fd()"oninput="fd()"placeholder="Filter ..."> <i class="material-icons">filter_list</i></div></div><div class="container"><div class="wrapper"><span><table class="record"><tbody><tr><th onclick="ro(1)">เลขประจำตัว <i class="material-icons">sort</i></th><th onclick="ro(2)">ชื่อ - สกุล <i class="material-icons">sort</i></th><th onclick="ro(3)">ประเภท <i class="material-icons">sort</i></th><th onclick="ro(4)">เลือก <i class="material-icons">sort</i></th><th onclick="ro(5)">กลุ่มการเรียน <i class="material-icons">sort</i></th><th>อื่นๆ</th></tr></tbody><tbody><tr onclick="tv(2)"><th colspan="6"style="text-align:center!important">ยืนยันข้อมูลการใช้สิทธิ์แล้ว <i class="material-icons">visibility</i></th></tr></tbody><tbody><?php include("../../resource/appwork/appfunc.php");$vua=array();$c2n=array();if($stddata->num_rows>=1){while($gd=$stddata->fetch_assoc())$c2n[$gd["stdcode"]]=$gd["name"];}if($cnfdata->num_rows>=1){$i=1;while($er=$cnfdata->fetch_assoc()){$stdname=$c2n[$er['stdcode']];$stdtype=(strlen($er['stdcode'])<6)?"นักเรียนเก่า":"สอบเข้าใหม่";$stdchoice=($er['cfm']=="Y")?"ยืนยันสิทธิ์":"สละสิทธิ์";$stdgroup=($er['cfm']=="Y")?code2group(strtoupper($er['cgroup'])):"";$stdopt=($er['cfm']=="N")?'<a href="javascript:ve(3, '.strval($i).')">ดูไฟล์หลักฐาน</a>':"";echo "<tr><td>".$er['stdcode']."</td><td>$stdname</td><td>$stdtype</td><td>$stdchoice</td><td>$stdgroup</td><td>$stdopt</td></tr>";$i++;array_push($vua,$er['stdcode']);}} ?></tbody><tbody><tr onclick="tv(4)"><th colspan="6"style="text-align:center!important">ยังไม่ยืนยันข้อมูลการใช้สิทธิ์ <i class="material-icons">visibility</i></th></tr></tbody><tbody><?php mysqli_data_seek($stddata,0);if($stddata->num_rows>=1){while($er=$stddata->fetch_assoc()){if(!in_array($er['stdcode'],$vua)){$stdtype=(strlen($er['stdcode'])<6)?"นักเรียนเก่า":"สอบเข้าใหม่";$stdgroup=code2group(strtoupper($er['cgroup']));echo "<tr><td>".$er['stdcode']."</td><td>".$er["name"]."</td><td>$stdtype</td><td></td><td>$stdgroup</td><td></td></tr>";}}} ?></tbody></table></span></div><div class="wrapper"><span><iframe></iframe></span></div></div></main><?php include("../../resource/hpe/material.php"); ?><footer><?php include("../../resource/hpe/footer.php"); ?></footer></body></html>